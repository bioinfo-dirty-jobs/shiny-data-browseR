<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>1. Install instructions &mdash; Epigenome Data Browse-R 0.1 beta documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1 beta',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Epigenome Data Browse-R 0.1 beta documentation" href="index.html" />
    <link rel="next" title="4. Using the Browse-R" href="basic_view.html" />
    <link rel="prev" title="Epigenome Data Browse-R: an interactive statistical browser for population genomics" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="basic_view.html" title="4. Using the Browse-R"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Epigenome Data Browse-R: an interactive statistical browser for population genomics"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Epigenome Data Browse-R 0.1 beta documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="toctree-wrapper compound" id="install">
<ul class="simple">
</ul>
</div>
<div class="section" id="install-instructions">
<h1>1. Install instructions<a class="headerlink" href="#install-instructions" title="Permalink to this headline">¶</a></h1>
<p>This step only needs to be done once by the web administrator setting up the application. It does not have to be repeated by all endusers.
You will need access to a machine running a web server viewable to your users.</p>
<p>All EDB development has been done on Unix machines, but installation should work on any machine that can run Shiny server.</p>
<p>The recommended machine configuration is</p>
<ul class="simple">
<li>OS: the EDB has been tested on Ubuntu 10.04, 12.04 and 14.04, but any machine that runs Shiny server should work.</li>
<li>&gt; 7 Gb RAM</li>
<li>&gt; 2 Gb disk; 2.0G is the size of all software dependencies and the demo dataset.</li>
</ul>
<p>These instructions are for a machine running Ubuntu 14.04 (LTS). I have also successfully set up the app on Debian Wheezy LTS.
Each package will prompt saying something along the lines of &#8220;This package with require XYZ space. Continue [Y/n]?&#8221;. Type &#8220;Y&#8221;.</p>
<ol class="arabic simple">
<li>Install R (&gt;=3.1.0)</li>
</ol>
<div class="highlight-none"><div class="highlight"><pre>sudo add-apt-repository ppa:marutter/rrutter
sudo apt-get update
sudo apt-get upgrade
sudo apt-get install r-base r-base-dev
</pre></div>
</div>
<ol class="arabic simple">
<li>Install shiny server</li>
</ol>
<p>First install the R shiny package:</p>
<div class="highlight-none"><div class="highlight"><pre>sudo su - \
-c &quot;R -e \&quot;install.packages(&#39;shiny&#39;, repos=&#39;http://cran.rstudio.com/&#39;)\&quot;&quot;
</pre></div>
</div>
<p>In ~/.profile add the following line</p>
<div class="highlight-none"><div class="highlight"><pre>export LC_ALL=C
</pre></div>
</div>
<p>Then execute ~/.profile:</p>
<div class="highlight-none"><div class="highlight"><pre>. ~/.profile
</pre></div>
</div>
<p>This will set text-encoding preferences so your error messages don&#8217;t contain strange symbols.</p>
<p>Now download and install shiny-server:</p>
<div class="highlight-none"><div class="highlight"><pre>sudo apt-get install gdebi-core
wget http://download3.rstudio.org/ubuntu-12.04/x86_64/shiny-server-1.2.1.362-amd64.deb
sudo gdebi shiny-server-1.2.1.362-amd64.deb
</pre></div>
</div>
<ol class="arabic simple">
<li>Install Unix packages dependencies for the R/BioConductor packages</li>
</ol>
<div class="highlight-none"><div class="highlight"><pre>sudo apt-get install libcurl4-openssl-dev libxml2-dev
</pre></div>
</div>
<ol class="arabic simple">
<li>Install R package dependencies</li>
</ol>
<p>Select your local mirror when prompted (15 for Toronto)</p>
<div class="highlight-none"><div class="highlight"><pre>install.packages(c(&quot;shinyBS&quot;,&quot;doMC&quot;,&quot;RColorBrewer&quot;))
</pre></div>
</div>
</div>
<div class="section" id="add-data-sources">
<h1>2. Add data sources<a class="headerlink" href="#add-data-sources" title="Permalink to this headline">¶</a></h1>
<p>To add a new dataset to the browser, you need to setup the following:</p>
<ol class="arabic simple">
<li><em>dataset config file</em>: A dataset-specific config file containing all basic informatino about the dataset</li>
<li><em>phenotype matrix</em>: A tab-delimited text file containing a table of sample-wise metadata and location of sample-wise data file. See section X.XX for details.</li>
<li><em>data</em>: The data itself - e.g. sample-wise epigenetic measures. Currently this data is expected to be in bigwig format; future releases of the browser are expected to support other file formats.</li>
<li><em>group order</em>: A file indicating the order in which elements of a group are assigned colours in the browser. For example, a timeseries experiment may find it useful to cause the first timepoint to be plotted as first in the series, the second timepoint as second in a series. etc., rather than rely on alphanumeric ordering of the filenames. This is the file where the relative ordering of category members is specified.</li>
</ol>
<p><strong>Note: The browser expects all dataset config files to be located in a single directory.</strong>
The location of this directory is specified in &#8220;config_location.txt&#8221;, which is located in the directory from which the app is run: e.g. <em>/var/shiny-server/www/Shiny_BrowseR</em></p>
<div class="section" id="example-directory-structure-for-datasets">
<h2>2.1. Example directory structure for datasets<a class="headerlink" href="#example-directory-structure-for-datasets" title="Permalink to this headline">¶</a></h2>
<p id="add-data-exampledir"><em>TODO Mention no constraint to have data in this structure, as links are provided for data files in phenotype matrix and config files can be symlinked.</em>
In this example we have two datasets, one showing epigenetic dynamics in mouse brain development and the other, for human. Here, <tt class="code docutils literal"><span class="pre">config_location.txt</span></tt> points to a directory which also contains all browser-related metadata and the data files themselves:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;config_location_points_here&gt;
         |
         |---- mouseBrainDev_config.txt *symlink*
         |---- humanBrainDNAMethylome_config.txt *symlink*
         |---- mouseBrainDev/
                        |---- config.txt
                        |---- pheno.txt
                        |---- group_order.txt
                        |---- data
                                  |---- GSM123456_mm9.bw
                                  |---- GSM654321_mm9.bw
                                  | ...
                                  |---- GSM9999_mm9.bw
         |---- humanBrainDNAMethylome/
                        |---- config.txt
                        |---- pheno.txt
                        |---- group_order.txt
                        |---- data
                                  |----
                                  |---- PCW4.bw
                                  |---- midGestation_Cortex.bw
                                  | ...
                                  |---- PostPuberty_AnteriorCingulateCortex.bw
     |----anno
</pre></div>
</div>
<p><em>TODO: Turn above into a graphic?</em></p>
</div>
<div class="section" id="dataset-config-file">
<h2>2.2. Dataset config file<a class="headerlink" href="#dataset-config-file" title="Permalink to this headline">¶</a></h2>
<p id="add-data-config">This file contains metadata about the dataset in general. It is a tab-delimited file with two columns: a key (controlled word) and value.
Currently, all these fields are required:
* <tt class="docutils literal"><span class="pre">name</span></tt>: dataset name
* <tt class="docutils literal"><span class="pre">name_color</span></tt>
* ...
* <tt class="docutils literal"><span class="pre">datatype</span></tt>: Values should be one of: <tt class="docutils literal"><span class="pre">[bigwig</span> <span class="pre">|</span> <span class="pre">BSseq]</span></tt>. Indicates how data should be processed; most single continuous traces (e.g. coverage, tiling microarrays) can use the &#8216;bigwig&#8217; setting.</p>
<p><a class="reference internal" href="#install"><em>Back to top</em></a></p>
</div>
<div class="section" id="phenotype-matrix">
<h2>2.3. Phenotype matrix<a class="headerlink" href="#phenotype-matrix" title="Permalink to this headline">¶</a></h2>
<p id="add-data-pheno">This tab-delimited file contains sample-wise metadata, including locations of data files. Each row should contain data for one sample, and each column should contain a unique type of metadata. Column order is unimportant to the browser.
The browser expects the following columns, named exactly in this way:</p>
<ul class="simple">
<li>sampleName <em>TODO or is it SampleID? Look it up!</em></li>
<li>bigDataURL: Location of data file</li>
<li>all grouping columns as described in the <a class="reference internal" href="#add-data-grouping"><em>grouping order</em></a> file.</li>
</ul>
</div>
<div class="section" id="groups-and-grouping-order">
<h2>2.4. Groups and grouping order<a class="headerlink" href="#groups-and-grouping-order" title="Permalink to this headline">¶</a></h2>
<p id="add-data-grouping">The <tt class="code docutils literal"><span class="pre">group_order.txt</span></tt> file is a tab-delimited file containing a table of two columns:
#. groupID: Group name, must match a column name in the phenotype matrix
#. groupOrder: Order in which group members must be shown. Comma-separated collection of values. <a href="#id1"><span class="problematic" id="id2">**</span></a>All values for a given group must be specified here. The browser will return an error if any additional group members are found in the phenotype table but are not listed here.</p>
<p>In addition to these groups, the browser allows a non-grouping option - i.e. viewing sample-specific data - with &#8220;Grouping: (none)&#8221;.</p>
<p>As an example:</p>
<div class="highlight-python"><div class="highlight"><pre>groupID groupOrder
Tissue  Brain,Sperm
Diagnosis       Control,Schizophrenia,Bipolar disorder
TimeOfSampling  Before_Treatment,During_Treatment,After_Treatment
</pre></div>
</div>
<p>For this dataset, the browser would show 4 grouping options: Tissue, Diagnosis, TimeOfSampling, (none).</p>
<blockquote>
<div><a class="reference internal" href="#install"><em>Back to top</em></a></div></blockquote>
</div>
</div>
<div class="section" id="add-annotation-sources">
<h1>3. Add annotation sources<a class="headerlink" href="#add-annotation-sources" title="Permalink to this headline">¶</a></h1>
<p>This is the directory structure for annotation sources:</p>
<div class="highlight-python"><div class="highlight"><pre>|------ hg19
                |------ cpgIslandExt.txt
                |------ cytoBandIdeo.txt
                |------ TxDb.Hsapiens.UCSC.hg19.refGene.sqlite
|------ mm9
                |------ cpgIslandExt.txt
                |------ LAD_NPC_mm9.txt
</pre></div>
</div>
<p>This is normal text again.</p>
<p><a class="reference internal" href="#install"><em>Back to top</em></a></p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">1. Install instructions</a></li>
<li><a class="reference internal" href="#add-data-sources">2. Add data sources</a><ul>
<li><a class="reference internal" href="#example-directory-structure-for-datasets">2.1. Example directory structure for datasets</a></li>
<li><a class="reference internal" href="#dataset-config-file">2.2. Dataset config file</a></li>
<li><a class="reference internal" href="#phenotype-matrix">2.3. Phenotype matrix</a></li>
<li><a class="reference internal" href="#groups-and-grouping-order">2.4. Groups and grouping order</a></li>
</ul>
</li>
<li><a class="reference internal" href="#add-annotation-sources">3. Add annotation sources</a></li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Epigenome Data Browse-R: an interactive statistical browser for population genomics</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="basic_view.html"
                        title="next chapter">4. Using the Browse-R</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="basic_view.html" title="4. Using the Browse-R"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Epigenome Data Browse-R: an interactive statistical browser for population genomics"
             >previous</a> |</li>
        <li><a href="index.html">Epigenome Data Browse-R 0.1 beta documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Shraddha Pai, Centre for Addiction and Mental Health.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>